
# HomeProxy 安装与配置指南

视频讲解：[HomeProxy 安装与配置指南](https://youtu.be/LW7HG8WkOSw?si=HT72hRqT8UyxRX_C)

## 一、简介

HomeProxy 是基于 sing-box 的轻量级代理工具，与 ImmortalWrt 系统配合使用。相比 Passwall，其依赖更小，只有几十兆。

## 二、安装步骤

1. **更新软件包**
   - 进入系统 -> 软件包 -> 更新

2. **安装必要组件**
   - 安装 sing-box
   - 安装 HomeProxy（自带中文界面）
   - 安装完成后刷新页面

## 三、基本配置

### 1. 添加节点
- **手动添加**：选择协议并填写相关信息
- **链接导入**：
  - 从 Sub-Store 获取节点链接
  - 或从小火箭等工具复制 SS 链接
  - 在 HomeProxy 中导入链接

## 四、路由模式配置

### 1. 白名单模式
- 路由模式选择"大陆白名单"
- 选择主节点
- 设置国内 DNS 服务器
- 路由端口选择"所有端口"（确保非标准端口也能代理）
- 开启 HTTP 代理服务器（例如监听在 10080 端口）
- 保存并应用
- 如果说你要添加域名添加规则 在访问控制 - 直连/代理域名列表 - 这里可以添加域名

### 2. 自定义路由模式

**步骤一：添加路由节点**
- 添加香港节点作为默认节点
- 添加美国节点用于特定分流

**步骤二：添加规则集**
- 添加中国规则集
  - 从 sing-box 的 GitHub 上获取 SRS 文件
  - 出站选择已设置的代理节点
- 添加非中国规则集
  - 同样选择二进制和远程选项
  - 粘贴 GitHub 链接

**步骤三：配置路由规则**
- 建立中国规则
  - 选择中国规则集
  - 出站选择"直连"
- 建立非中国规则
  - 选择非中国规则集
  - 出站选择香港代理节点
- 保存并应用

## 五、高级应用：特定网站分流

以 Claude 为例：

1. **创建 Claude 规则集**
   - 参考 Mihomo 的 JSON 规则
   - 在 Sub-Store 的文件管理中添加 Claude 域名
   - 包含两个域名：`anthropic.com` 和 `claude.ai`
   - 确保局域网可访问内建的 Sub-Store
   - 获取链接（将 127 替换为机器的 IP）

2. **在 HomeProxy 中应用**
   - 新建 `claude_rule_set` 规则集
   - 粘贴 Sub-Store 链接
   - 新建 `claude_proxy` 路由节点，选择美国节点
   - 新建 `claude_rule` 规则，选择 `claude_rule_set` 规则集，出站选择 `claude_proxy`

3. **调整规则优先级**
   - 将 `claude_rule` 移到最前面以提高优先级
   - 保存并应用

## 六、验证配置

测试各网站访问情况：
- Google、V2EX 等网站
- Claude 访问（需要美国节点）

## 参考资料

HomeProxy 与 ImmortalWrt 是同一作者开发，更多信息可查看官方 GitHub 仓库。
