0:00:00.000,0:00:01.700
今天来讲homeproxy

0:00:03.933,0:00:06.500
它基于sing-box 比较轻量

0:00:07.650,0:00:10.100
这用的immortalwrt

0:00:12.133,0:00:14.700
首先修改语言为中文

0:00:16.700,0:00:19.650
然后进系统 - 软件包 - 更新

0:00:21.133,0:00:22.783
这是国内的源

0:00:28.700,0:00:30.250
但时间有点久

0:00:33.216,0:00:34.900
先安装sing-box

0:00:36.850,0:00:39.700
sing-box解压出来也就几十兆吧

0:00:40.383,0:00:42.900
比passwall的依赖要小好多

0:00:48.933,0:00:51.216
然后安装home proxy

0:00:52.900,0:00:54.583
这直接安装中文的

0:00:59.933,0:01:02.450
安装成功以后刷新下页面

0:01:06.416,0:01:08.583
切换到homeproxy页面

0:01:10.650,0:01:13.500
这演示下如何手动添加节点

0:01:16.183,0:01:18.900
这手动添加麻烦 就不演示了

0:01:20.016,0:01:23.450
反正就是选协议 填上其他信息

0:01:26.733,0:01:30.850
我们简单一点 直接粘贴比如shadowsocks的链接

0:01:31.100,0:01:33.016
这打开你的sub-store

0:01:35.133,0:01:36.850
获取节点的链接

0:01:38.416,0:01:44.016
你如果没有sub store 也可以从比如小火箭把ss的链接复制出来

0:01:44.983,0:01:47.333
回到homeproxy 导入链接

0:01:48.016,0:01:50.416
这就是直接添加节点

0:01:51.900,0:01:54.650
我们首先看它的白名单模式

0:01:54.900,0:01:57.500
路由模式选大陆白名单

0:01:57.650,0:01:58.900
选主节点

0:01:59.183,0:02:01.816
设置国内DNS服务器

0:02:02.300,0:02:04.616
路由端口 选所有端口

0:02:04.816,0:02:07.700
要不非标准的端口它不会代理

0:02:08.616,0:02:13.133
然后我们开启它的http代理服务器 用来演示

0:02:13.733,0:02:16.700
这设置监听在10080端口

0:02:18.100,0:02:20.133
然后保存并应用

0:02:23.500,0:02:25.650
我们来到服务状态这里

0:02:27.333,0:02:30.133
这可以测试百度 谷歌的连接

0:02:32.616,0:02:37.983
这我们设置浏览器扩展的代理为刚才的http代理服务器

0:02:41.450,0:02:43.616
测试确实能打开谷歌

0:02:45.100,0:02:48.100
如果说你要添加域名走直连

0:02:49.183,0:02:52.250
在访问控制这里可以添加域名

0:02:53.016,0:02:55.300
白名单模式没有分流

0:02:55.500,0:02:58.216
我们再来看自定义路由模式

0:02:58.383,0:03:01.216
这时上面的菜单也发生了变化

0:03:02.216,0:03:04.783
第一步我们添加路由节点

0:03:07.783,0:03:09.100
选一个节点

0:03:12.333,0:03:14.700
这我们选一个香港节点

0:03:16.100,0:03:18.783
作为默认节点 速度比较快

0:03:21.450,0:03:24.733
我们再演示下 添加一个美国的节点

0:03:25.583,0:03:27.733
后面方便分流选择

0:03:29.333,0:03:32.933
添加完节点以后 你才方便添加规则集

0:03:33.133,0:03:35.533
第二步 我们添加规则集

0:03:37.100,0:03:38.933
添加中国规则集

0:03:40.050,0:03:44.250
这从sing box的github上的srs文件

0:03:44.733,0:03:47.416
github下载不稳定 需要代理

0:03:47.850,0:03:51.983
所以说要添加完路由节点以后再添加规则

0:03:52.216,0:03:55.383
这里出站选择刚才设置的proxy

0:03:55.500,0:03:57.050
通过代理下载

0:03:57.700,0:04:00.383
接着我们添加非中国的规则

0:04:00.933,0:04:03.050
一样的 选择二进制

0:04:04.533,0:04:05.900
选择远程

0:04:07.900,0:04:10.016
粘贴进github链接

0:04:11.650,0:04:15.733
你也可以到github上看下其他规则 用来分流

0:04:20.016,0:04:21.533
这我们点保存

0:04:23.416,0:04:25.816
第三步 我们来到路由规则

0:04:26.816,0:04:31.450
这下可以在路由规则里把路由节点与规则集关联起来

0:04:31.616,0:04:34.650
建立中国与非中国的路由规则

0:04:39.500,0:04:41.416
选非中国的规则集

0:04:45.783,0:04:48.500
出站选proxy这个路由节点

0:04:49.933,0:04:54.333
也就是非中国的流量默认走前面选的香港节点

0:04:54.650,0:04:57.333
接着设置中国的路由规则

0:05:02.383,0:05:04.650
让中国的流量走直连

0:05:08.383,0:05:10.383
最后保存并应用

0:05:12.183,0:05:13.983
我们看下代理效果

0:05:15.616,0:05:18.016
google等网站都能打开

0:05:25.100,0:05:27.816
最后claude提示区域不可用

0:05:28.333,0:05:32.050
这是因为用的香港节点 要美国节点才行

0:05:32.700,0:05:36.050
我们可以参考下mihomo的json的规则

0:05:36.050,0:05:38.450
为claude添加域名规则

0:05:39.250,0:05:42.450
打开mihomo的sub store的文件管理

0:05:42.900,0:05:45.216
填入claude的域名规则

0:05:46.783,0:05:48.100
两个域名

0:05:50.733,0:05:54.416
这记得打开局域网能访问内建的sub store

0:05:54.416,0:05:56.900
mihomo 介绍往期视频有

0:06:02.016,0:06:03.533
复制出链接

0:06:10.016,0:06:12.533
127替换为机器的IP

0:06:19.250,0:06:23.050
然后这里新建叫claude_rule_set的规则集

0:06:34.416,0:06:37.100
粘贴进刚才的sub store链接

0:06:41.583,0:06:43.616
回到路由规则这里

0:06:45.500,0:06:48.783
新建一个叫claude_proxy的路由节点

0:06:50.850,0:06:52.650
选择美国节点

0:06:59.983,0:07:02.416
最后建立一个叫claude_rule

0:07:12.650,0:07:14.933
选claude_rule_set 规则集

0:07:19.500,0:07:21.416
出站选claude_proxy

0:07:22.783,0:07:23.583
保存

0:07:26.300,0:07:29.933
但其实这样设置了还需要调整下顺序

0:07:29.933,0:07:32.616
我们把claude_rule放到上面去

0:07:33.450,0:07:36.816
它的路由规则在前面的优先级更高

0:07:37.850,0:07:41.383
把它挪移到前面 优先级最高 并保存

0:07:43.133,0:07:47.333
生效以后我们再测试下v2ex google这些网站

0:07:53.250,0:07:55.650
以及claude看有没有生效

0:08:02.100,0:08:04.016
可以看到是生效的

0:08:05.100,0:08:07.850
这是它的官方github仓库

0:08:08.850,0:08:12.216
homeproxy与immortal wrt是一个作者

0:08:12.383,0:08:16.733
之前也是v2ex上老哥让我试试homeproxy

0:08:16.816,0:08:19.983
最后还请大家点个关注 非常感谢🙏
