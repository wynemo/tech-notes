### **《软件设计的哲学》核心设计规则**

**核心思想：对抗复杂性 (Fight Complexity) 是唯一重要的事。**

1.  **规则一：追求“深”模块 (Pursue "Deep" Modules)**
    * **描述**: 模块的接口应该极其简单，但其实现的功能却非常强大。一个模块隐藏的复杂性远超其暴露的复杂性时，它就是“深”的。
    * **反模式**: 浅模块 (Shallow Module)——接口复杂，功能却很简单，它制造的复杂性比解决的还多。

2.  **规则二：隐藏设计决策，而非仅仅数据 (Hide Design Decisions, Not Just Data)**
    * **描述**: 信息隐藏的真正威力在于隐藏那些不稳定的设计决策（如文件格式、算法选择、数据结构）。
    * **警报**: 如果一个设计决策（如“用户 ID 必须是 UUID 格式”）体现在了多个模块的接口或实现中，这就是“信息泄露”(Information Leakage)。

3.  **规则三：不同层应有不同抽象 (Different Layers, Different Abstractions)**
    * **描述**: 相邻的软件层（如 API 层与业务逻辑层）必须提供不同的抽象。
    * **反模式**: “直通”方法 (Pass-through methods)——一个高层方法只是简单地调用同名的低层方法，这样的抽象层是无价值的，应该被移除。

4.  **规则四：为“为什么”写注释，而非“做什么” (Comment the "Why," Not the "What")**
    * **描述**: 好的代码能自解释“它在做什么”。注释的价值在于解释代码背后无法表达的**意图、背景和设计权衡**。
    * **实践**: 在写函数实现前，先写下它的签名和注释。这能强迫你从使用者的角度思考接口设计。

5.  **规则五：从设计上消灭错误 (Define Errors Out of Existence)**
    * **描述**: 与其抛出大量异常让调用者处理，不如重新设计 API，使其能够优雅地处理各种情况，从而让“错误”状态根本不会发生。
    * **示例**: 一个`delete()`方法可能会因为文件不存在而失败；但一个`ensureDeleted()`方法则无论文件是否存在都能保证最终结果，从而消灭了“文件不存在”这个错误。

6.  **规则六：将命名困难视为设计警报 (Treat Naming Difficulty as a Design Alert)**
    * **描述**: 如果你很难为一个变量、函数或类找到一个简单、精确的名字，这通常意味着它的职责不明确或抽象层次有问题。
    * **行动**: 停下来，重新思考它的设计，而不是随便起一个模糊的名字（如 `Helper`, `Manager`, `Info`）。

7.  **规则七：投入 10-20% 的时间进行战略性编程 (Invest 10-20% in Strategic Programming)**
    * **描述**: 不要只顾着“让它跑起来”（战术编程）。坚持投入一小部分时间进行重构、优化设计和完善文档。这是对未来效率的投资。
    * **心态**: 优秀的设计不是成本，而是能带来长期回报的资产。

8.  **规则八：对重要设计，构思至少两个方案 (Design It Twice)**
    * **描述**: 对于任何非凡的设计问题，强迫自己构思出至少两种截然不同的解决方案。比较它们，能让你发现各自的优劣，并做出更明智的最终决策。
